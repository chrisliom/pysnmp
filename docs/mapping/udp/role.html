<HTML>
<HEAD>
<TITLE>PySNMP: Transport Mappings: UDP/IP: Synchronous</TITLE>
</HEAD>

<BODY BGCOLOR="#ffffff" TEXT="#000000"
      LINK="#0000bb"  VLINK="#551a8b" ALINK="#ff0000">
<H3>
Synchronous I/O engine
</H3>
<P>
The following code implements network transport that performs synchronous,
blocking I/O over a single BSD socket. It is intended to serve as a 
network transport for SNMP messages, within a synchronous SNMP entity
process, over a TCP/IP network.
</P>
<P>
The <STRONG>pysnmp.mapping.udp.role</STRONG> module defines the following
items:
</P>
<A NAME="manager"></A>
<DL>
<DT>class <STRONG>manager</STRONG>([<STRONG>dst</STRONG>[,<STRONG>iface</STRONG>]])</DT>
<DD>
<P>
Returns a new instance of <STRONG>manager</STRONG> class, representing
network client (SNMP manager) optionally connected to a network server
running at <STRONG>dst</STRONG> address. The <STRONG>dst</STRONG> argument,
whenever given, must follow the <STRONG>socket</STRONG> module notation -- 
('<STRONG>hostname</STRONG>', <STRONG>port</STRONG>) where hostname is a
string and port is an integer.
</P>
<P>
The default for <STRONG>dst</STRONG> is None what means no default destination,
so user would unconditionally have to specify destination to each
<STRONG>manager.send</STRONG>() method (<A HREF="#Subsections">see below</A>).
</P>
<P>
Once a default <STRONG>dst</STRONG> is specified, specific destination
may not be given to the <STRONG>manager.send</STRONG>() method.
</P>
<P>
The <STRONG>iface</STRONG> parameter, if given, specifies the interface and
port on local machine to <STRONG>bind</STRONG>() to. This argument must also
follow the <STRONG>socket</STRONG> module notation. All further requests
would then be originated from the given interface/port (for example,
('127.0.0.1', 0)).
</P>
<P>
The default for <STRONG>iface</STRONG> is ('0.0.0.0', 0) what stands for
binding to a primary interface at the local machine.
</P>
<A NAME="agent"></A>
</DD>
<DT>class <STRONG>agent</STRONG>([(<STRONG>cb_fun</STRONG>, <STRONG>cb_ctx</STRONG>)[, <STRONG>ifaces</STRONG>]])</DT>
<DD>
<P>
Returns a new instance of <STRONG>agent</STRONG> class, representing
network server optionally bound to specific network interfaces/ports 
<STRONG>ifaces</STRONG> at the local machine. The <STRONG>ifaces</STRONG>
argument, whenever given, must be a list of ('<STRONG>ifacename</STRONG>',
<STRONG>port</STRONG>) tuples given in <STRONG>socket</STRONG> module
notation.
</P>
<P>
The optional <STRONG>cb_fun</STRONG> and <STRONG>cb_ctx</STRONG> parameters
may be used on class instaniation to specify default user callback function
to be invoked on message receiption. A reference to user-specific data
(context) may be passed as <STRONG>cb_ctx</STRONG> parameter.
</P>
<P>
The <STRONG>cb_fun</STRONG>, if given, must match the following prototype:
<DL>
<DT><STRONG>cb_fun</STRONG>(<STRONG>cb_ctx</STRONG>, (<STRONG>question</STRONG>, <STRONG>src</STRONG>))</DT>
<DD>
<P>
Where <STRONG>question</STRONG> is an octet-string, as received from network,
and <STRONG>src</STRONG> is question's source address given in <STRONG>socket
</STRONG> module notation.
</P>
<P>
The callback function is expected to return a tuple of 
(<STRONG>answer</STRONG>, <STRONG>dst</STRONG>), where 
<STRONG>answer</STRONG> (string) is the data item to be replied back to
manager by address <STRONG>dst</STRONG> (given in <STRONG>socket</STRONG>
module notation).
</P>
</DD>
</DL>
</P>
<P>
The default for the <STRONG>ifaces</STRONG> is to listen on the loopback
interface, port 161/UDP, so the default value is [('127.0.0.1', 161)].
</P>
<P>
Be aware that for a UNIX process to bind(2) to a low port, such as 161 (that
is less than 1024), a superuser privelege is required. Since running
scripts under superuser privelege is not particular secure in UNIX environment,
binding to a non-priveleged port is therefore strongly recommended.
</P>
</DD>
</DL>

<P>
Methods of the above classes may raise exceptions based on
<STRONG>error.SnmpOverUdpError</STRONG> base class.
</P>

<HR>

<A NAME="Subsections"></A>

<STRONG>Subsections</STRONG>

<P>
<UL>
<LI><A HREF="role-manager-objects.html">Objects of the role.manager class</A>
<LI><A HREF="role-agent-objects.html">Objects of the role.agent class</A>
</UL>

<HR>

<ADDRESS>
ilya@glas.net
</ADDRESS>

</BODY>
</HTML>
