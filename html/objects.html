<HTML>
<HEAD>
<TITLE>PySNMP module documentation</TITLE>
</HEAD>

<BODY BGCOLOR="#ffffff" TEXT="#000000"
      LINK="#0000bb"  VLINK="#551a8b" ALINK="#ff0000">
<H3>
Objects of session class
</H3>
<P>
Each of the methods described in this chapter may raise exceptions
(listed in the previous chapter) if either distant SNMP process
reported an error or SNMP engine failed for whatever reason.
</P>
<P>
The instances of session class have the following methods:
</P>

<DL>
<DT>
<STRONG>encode_integer (value)</STRONG><BR>
<STRONG>encode_ipaddr (value)</STRONG><BR>
<STRONG>encode_timeticks (value)</STRONG><BR>
<STRONG>encode_string (value)</STRONG><BR>
<STRONG>encode_oid (value)</STRONG><BR>
</DT>
<DD>
<P>
Return BER encoded value (as string) from plain <STRONG>value</STRONG>.
</P>
<P>
Type of <STRONG>value</STRONG> depends of method used.
</P>
<P>
<UL>
  <LI><STRONG>encode_integer()</STRONG> requires integer type argument
  <LI><STRONG>encode_ipaddr()</STRONG> requires integer type argument
  <LI><STRONG>encode_timeticks()</STRONG> requires integer type argument
  <LI><STRONG>encode_string()</STRONG> requires string type argument
  <LI><STRONG>encode_oid()</STRONG> requires a list of integers
representing Object ID (also known as sub-Object IDs)
</UL>
</DD>
</DL>

<DL>
<DT><STRONG>str2nums</STRONG> (<STRONG>objid</STRONG>)</DT>
<DD>
<P>
Return a list of integers representing SNMP Object ID <STRONG>objid</STRONG>
passed in string representation (e.g. '1.3.6.1.2.1.1.1.0').
</P>
</DD>
</DL>

<DL>
<DT><STRONG>encode_request (type, encoded_objids, encoded_vals)</STRONG></DT>
<DD>
<P>
Return BER encoded SNMP message (as string) of specified <STRONG>type</STRONG>
(string constant) loaded with BER <STRONG>encoded_objids</STRONG> and
<STRONG>encoded_vals</STRONG>.
</P>
<P>
The following SNMP message <STRONG>type</STRONG>s are known:
</P>
<UL>
<LI>`GETREQUEST' - SNMP v.1 GET request
<LI>`SETREQUEST' - SNMP v.1 SET request
<LI>`GETNEXTREQUEST' - SNMP v.1 GETNEXT request
</UL>
</P>
<P>
The <STRONG>encoded_objids</STRONG> and <STRONG>encoded_vals</STRONG>
arguments must be lists of BER encoded SNMP Object IDs and their associated
values respectively.
</P>
</DD>
</DL>

<DL>
<DT><STRONG>decode_response (message[, type])</STRONG></DT>
<DD>
<P>
Decode SNMP message of request <STRONG>type</STRONG> and return a tuple
of two lists -- a list of BER encoded SNMP Object IDs and a list of
associated values from SNMP response <STRONG>message</STRONG>.
</P>
<P>
See <STRONG>encode_request()</STRONG> section for valid request
<STRONG>type</STRONG>s. The default for <STRONG>type</STRONG> value
is set to `<STRONG>GETRESPONSE</STRONG>'.
</P>
</DD>
</DL>

<DL>
<DT><STRONG>decode_value (encoded_value)</STRONG></DT>
<DD>
<P>
Return plain value from BER <STRONG>encoded_value</STRONG>. The type
of return value depends of the ASN.1 type of data item encapsulated in
<STRONG>encoded_value</STRONG>.
</P>
<P>
If <STRONG>encoded_value</STRONG> carries data item of ASN.1 type:
<UL>
  <LI>INTEGER, the return value is of type integer
  <LI>IPADDRESS, the return value is of type string (IP address in dotted
numbers representation)
  <LI>TIMETICKS, the return value is of type integer (unsigned)
  <LI>STRING, the return value is of type string
  <LI>OBJECTID, the return value is a list of integers (sub-IDs)
</P>
</UL>
</DD>
</DL>

<DL>
<DT><STRONG>nums2str</STRONG> (<STRONG>objid</STRONG>)</DT>
<DD>
<P>
Return a string representing SNMP Object ID <STRONG>objid</STRONG>
passed as a list of integers (e.g. [1, 3, 6, 1, 2, 1, 1, 1, 0]).
</P>
</DD>
</DL>

<DL>
<DT><STRONG>send_and_receive (message)</STRONG></DT>
<DD>
<P>
Attempt to send SNMP <STRONG>message</STRONG> and receive SNMP response
from SNMP agent. Return BER encoded SNMP message (as string) as received
from SNMP agent.
</P>
</DD>
</DL>

<DL>
<DT><STRONG>open ()</STRONG></DT>
<DD>
<P>
Create and return connected socket object to be further used for
sending SNMP request to SNMP agent.
</P>
</DD>
</DL>

<DL>
<DT><STRONG>send (message)</STRONG></DT>
<DD>
<P>
Attempt to send SNMP <STRONG>message</STRONG> to SNMP agent.
</P>
</DD>
</DL>

<DL>
<DT><STRONG>receive ()</STRONG></DT>
<DD>
<P>
Return SNMP response message as received from SNMP agent or times
out in <STRONG>timeout</STRONG>.
</P>
</DD>
</DL>

<DL>
<DT><STRONG>close ()</STRONG></DT>
<DD>
<P>
Destroy socket object used for talking to SNMP agent.
</P>
</DD>
</DL>

<P>
The objects of session class have the following public instance
variables:
</P>


<DL>
<DT><STRONG>port</STRONG></DT>
<DD>
<P>
Specify the UDP <STRONG>port</STRONG> of remote SNMP process. The <STRONG>
port</STRONG> variable is of type integer.
</P>
<P>
The default value for UDP port is 161.
</DD>
</DL>

<DL>
<DT><STRONG>timeout</STRONG></DT>
<DD>
<P>
Specify for how many seconds to wait for response from SNMP agent. The
<STRONG>timeout</STRONG> attribute is of floating point type.
</P>
<P>
The default is 1.0 second.
</DD>
</DL>

<DL>
<DT><STRONG>retries</STRONG></DT>
<DD>
<P>
Specify the number of request re-transmissions. The <STRONG>retries</STRONG>
attribute is of integer type.
</P>
<P>
The default is 3 retries.
</P>
</DD>
</DL>

<DL>
<DT><STRONG>iface</STRONG></DT>
<DD>
<P>
Specify the IP number of local interface SNMP engine is to bind to. All
SNMP requests would be originated from the interfaces SNMP engine binds
to.
</P>
<P>
The <STRONG>iface</STRONG> attribute should be a list of strings where
each string should represent either FQDN or IP number of desired local
interface.
</P>
<P>
The default value is None what means to bind to all the local interfaces
and originate SNMP request from primary system interface.
</P>
<P>
XXX: current implementation binds ONLY to the first interface of the list.
</P>
</DD>
</DL>

<HR>

<ADDRESS>
ilya@glas.net
</ADDRESS>

</BODY>
</HTML>